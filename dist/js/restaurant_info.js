"use strict";var map,restaurant=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.log(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})};var fetchRestaurantFromURL=function(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");if(e)DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)});else{n("No restaurant id in URL",null)}}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var t=document.getElementById("restaurant-img");t.className="restaurant-img",t.alt=e.name+" restaurant's photo",t.src=DBHelper.imageUrlForRestaurant(e);var n=t.src.replace(/(\.[\w\d_-]+)$/i,"-480$1");t.setAttribute("srcset",n+" 480w, "+t.src+" 800w"),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var a=document.createElement("tr"),r=document.createElement("td");r.innerHTML=n,a.appendChild(r);var l=document.createElement("td");l.innerHTML=e[n],a.appendChild(l),t.appendChild(a)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("h3");if(n.innerHTML="Reviews",t.appendChild(n),!e){var a=document.createElement("p");return a.innerHTML="No reviews yet!",void t.appendChild(a)}var r=document.getElementById("reviews-list");e.forEach(function(e){r.appendChild(createReviewHTML(e))}),t.appendChild(r)},createReviewHTML=function(e){var t=document.createElement("li"),n=document.createElement("div");n.className="flex-container review-title";var a=document.createElement("p");a.innerHTML=e.name,a.className="col",n.appendChild(a);var r=document.createElement("p");r.innerHTML=e.date,r.className="col text-right",n.appendChild(r),t.appendChild(n);var l=document.createElement("div");l.className="review-content";var i=document.createElement("p");i.innerHTML="Rating: "+e.rating,i.classList.add("badge"),l.appendChild(i);var d=document.createElement("p");return d.innerHTML=e.comments,l.appendChild(d),t.appendChild(l),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,n.setAttribute("aria-level",2),n.setAttribute("aria-current","page"),t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJtYXAiLCJyZXN0YXVyYW50Iiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzZWxmIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJjZW50ZXIiLCJsYXRsbmciLCJzY3JvbGx3aGVlbCIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJEQkhlbHBlciIsImZldGNoUmVzdGF1cmFudEJ5SWQiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJpbm5lckhUTUwiLCJuYW1lIiwiYWRkcmVzcyIsImltYWdlIiwic3JjIiwiaW1hZ2VVcmxGb3JSZXN0YXVyYW50IiwiaW1hZ2U0ODAiLCJyZXBsYWNlIiwiY3Vpc2luZSIsImZpbGxSZXN0YXVyYW50SG91cnNIVE1MIiwib3BlcmF0aW5nSG91cnMiLCJvcGVyYXRpbmdfaG91cnMiLCJmaWxsUmV2aWV3c0hUTUwiLCJrZXkiLCJyb3ciLCJjcmVhdGVFbGVtZW50IiwiZGF5IiwidGltZSIsImhvdXJzIiwiYXBwZW5kQ2hpbGQiLCJyZXZpZXdzIiwiY29udGFpbmVyIiwidGl0bGUiLCJub1Jldmlld3MiLCJjcmVhdGVSZXZpZXdIVE1MIiwicmV2aWV3IiwidWwiLCJjbGFzc05hbWUiLCJyZXZpZXdUaXRsZSIsImRhdGUiLCJsaSIsInJhdGluZyIsImFkZCIsImNvbW1lbnRzIiwicmV2aWV3Q29udGVudCIsInNldEF0dHJpYnV0ZSIsImJyZWFkY3J1bWIiLCJ1cmwiLCJleGVjIiwicmVzdWx0cyIsImRlY29kZVVSSUNvbXBvbmVudCJdLCJtYXBwaW5ncyI6ImFBQUEsSUFDSUEsSUFEQUMsZ0JBQUFBLEVBTUpDLE9BQU9DLFFBQVUsV0FDZkMsdUJBQXVCLFNBQUNDLEVBQU9K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Q3hCQSxFQUFNQyxVQUFLNUMsaUJBQ1gwQyxFQUFNQSxZQUFjMUMsR0FhcEI0QyxFQUFHWCxZQUFZUyxHQVRkM0IsSUFBS0QsRUFBWXlCLFNBQWpCVixjQUFBLE9BQ0RkLEVBQUswQixVQUFMLGlCQWFDLElBQU1JLEVBQVM3QyxTQUFTNkIsY0FBYyxLQVZ0Q2dCLEVBQU1GLFVBQU4sV0FBc0JkLEVBQWNnQixPQUNwQ0YsRUFBSzdCLFVBQUxnQyxJQUFpQlAsU0FDbEJJLEVBQUFWLFlBQWlCWSxHQWFoQixJQUFNRSxFQUFXL0MsU0FBUzZCLGNBQWMsS0FMeEMsT0FMRGUsRUFBR1gsVUFBWVMsRUFBZkssU0FZQUMsRUFBY2YsWUFBWWMsR0FUMUJDLEVBQUFBLFlBQWNQLEdBRVBJLEdBTU5FLGVBQXFCUixXQUFyQixJQUFxQkEsRUFBckIsRUFBQTVCLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUE0Qm9DLEtBQTVCMUQsV0FDRDJELEVBQWNmLFNBQVljLGVBQTFCLGNBWU9ILEVBQUs1QyxTQUFTNkIsY0FBYyxNQVZuQ2UsRUFBQUEsVUFBQXZELEVBQWUyRCxLQVlmSixFQUFHSyxhQUFhLGFBQWMsR0FWN0JMLEVBQUFLLGFBQUEsZUFBQSxRQS9CRkMsRUFBQWpCLFlBQUFXLElBcUN3QnZELG1CQUErQixTQUFBMEIsRUFBQW9DLEdBYWhEQSxJQVpMQSxFQUFNRCxPQUFBQSxTQUFhbEQsTUFDbkJlLEVBQU02QixFQUFLNUMsUUFBUzZCLFVBQVQsUUFDWmUsSUFDQUEsRUFEQSxJQUFldkQsT0FBZixPQUFBMEIsRUFBQSxxQkFDZ0JxQyxLQUFBRCxHQUNmUCxPQUFHSyxFQUxMSSxFQUFBLEdBU0FDLG1CQUFBRCxFQUFBLEdBQUFoQyxRQUFBLE1BQUEsTUFZVyxHQWZUNkIiLCJmaWxlIjoicmVzdGF1cmFudF9pbmZvLmpzIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHJlc3RhdXJhbnQ7XHJcbnZhciBtYXA7XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBHb29nbGUgbWFwLCBjYWxsZWQgZnJvbSBIVE1MLlxyXG4gKi9cclxud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XHJcbiAgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCgoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXHJcbiAgICAgIC8vY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcclxuICAgICAgICB6b29tOiAxNixcclxuICAgICAgICBjZW50ZXI6IHJlc3RhdXJhbnQubGF0bG5nLFxyXG4gICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgICAgZmlsbEJyZWFkY3J1bWIoKTtcclxuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubWFwKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBjdXJyZW50IHJlc3RhdXJhbnQgZnJvbSBwYWdlIFVSTC5cclxuICovXHJcbmNvbnN0IGZldGNoUmVzdGF1cmFudEZyb21VUkwgPSAoY2FsbGJhY2spID0+IHtcclxuICBpZiAoc2VsZi5yZXN0YXVyYW50KSB7IC8vIHJlc3RhdXJhbnQgYWxyZWFkeSBmZXRjaGVkIVxyXG4gICAgY2FsbGJhY2sobnVsbCwgc2VsZi5yZXN0YXVyYW50KVxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjb25zdCBpZCA9IGdldFBhcmFtZXRlckJ5TmFtZSgnaWQnKTtcclxuICBpZiAoIWlkKSB7IC8vIG5vIGlkIGZvdW5kIGluIFVSTFxyXG4gICAgbGV0IGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJ1xyXG4gICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCAoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcclxuICAgICAgc2VsZi5yZXN0YXVyYW50ID0gcmVzdGF1cmFudDtcclxuICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGZpbGxSZXN0YXVyYW50SFRNTCgpO1xyXG4gICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlXHJcbiAqL1xyXG5jb25zdCBmaWxsUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCA9IHNlbGYucmVzdGF1cmFudCkgPT4ge1xyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1uYW1lJyk7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcblxyXG4gIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1hZGRyZXNzJyk7XHJcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XHJcblxyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaW1nJyk7XHJcblx0aW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcclxuXHRpbWFnZS5hbHQgPSBgJHtyZXN0YXVyYW50Lm5hbWV9IHJlc3RhdXJhbnQncyBwaG90b2A7XHJcblx0aW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG5cdFxyXG5cdC8vIFNldCBzcmNzZXQgZm9yIHJlc3BvbnNpdmVcclxuXHRjb25zdCBpbWFnZTQ4MCA9IGltYWdlLnNyYy5yZXBsYWNlKC8oXFwuW1xcd1xcZF8tXSspJC9pLCAnLTQ4MCQxJylcclxuXHRpbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyY3NldCcsIGAke2ltYWdlNDgwfSA0ODB3LCAke2ltYWdlLnNyY30gODAwd2ApO1xyXG5cclxuICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xyXG4gIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XHJcblxyXG4gIC8vIGZpbGwgb3BlcmF0aW5nIGhvdXJzXHJcbiAgaWYgKHJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XHJcbiAgICBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCgpO1xyXG4gIH1cclxuICAvLyBmaWxsIHJldmlld3NcclxuICBmaWxsUmV2aWV3c0hUTUwoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXN0YXVyYW50IG9wZXJhdGluZyBob3VycyBIVE1MIHRhYmxlIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5jb25zdCBmaWxsUmVzdGF1cmFudEhvdXJzSFRNTCA9IChvcGVyYXRpbmdIb3VycyA9IHNlbGYucmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnMpID0+IHtcclxuICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJyk7XHJcbiAgZm9yIChsZXQga2V5IGluIG9wZXJhdGluZ0hvdXJzKSB7XHJcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG5cclxuICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICBkYXkuaW5uZXJIVE1MID0ga2V5O1xyXG4gICAgcm93LmFwcGVuZENoaWxkKGRheSk7XHJcblxyXG4gICAgY29uc3QgdGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XHJcbiAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV07XHJcbiAgICByb3cuYXBwZW5kQ2hpbGQodGltZSk7XHJcblxyXG4gICAgaG91cnMuYXBwZW5kQ2hpbGQocm93KTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYWxsIHJldmlld3MgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5jb25zdCBmaWxsUmV2aWV3c0hUTUwgPSAocmV2aWV3cyA9IHNlbGYucmVzdGF1cmFudC5yZXZpZXdzKSA9PiB7XHJcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtY29udGFpbmVyJyk7XHJcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG4gIHRpdGxlLmlubmVySFRNTCA9ICdSZXZpZXdzJztcclxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG5cclxuICBpZiAoIXJldmlld3MpIHtcclxuICAgIGNvbnN0IG5vUmV2aWV3cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQhJztcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChub1Jldmlld3MpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXZpZXdzLWxpc3QnKTtcclxuICByZXZpZXdzLmZvckVhY2gocmV2aWV3ID0+IHtcclxuICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XHJcbiAgfSk7XHJcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSByZXZpZXcgSFRNTCBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxyXG4gKi9cclxuY29uc3QgY3JlYXRlUmV2aWV3SFRNTCA9IChyZXZpZXcpID0+IHtcclxuXHRjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcblx0Y29uc3QgcmV2aWV3VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRyZXZpZXdUaXRsZS5jbGFzc05hbWUgPSAnZmxleC1jb250YWluZXIgcmV2aWV3LXRpdGxlJztcclxuXHJcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICBuYW1lLmlubmVySFRNTCA9IHJldmlldy5uYW1lO1xyXG5cdG5hbWUuY2xhc3NOYW1lID0gJ2NvbCc7XHJcblx0cmV2aWV3VGl0bGUuYXBwZW5kQ2hpbGQobmFtZSk7XHJcblxyXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgZGF0ZS5pbm5lckhUTUwgPSByZXZpZXcuZGF0ZTtcclxuXHRkYXRlLmNsYXNzTmFtZSA9ICdjb2wgdGV4dC1yaWdodCc7XHJcblx0cmV2aWV3VGl0bGUuYXBwZW5kQ2hpbGQoZGF0ZSk7XHJcblxyXG5cdGxpLmFwcGVuZENoaWxkKHJldmlld1RpdGxlKTtcclxuXHJcblx0Y29uc3QgcmV2aWV3Q29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdHJldmlld0NvbnRlbnQuY2xhc3NOYW1lID0gJ3Jldmlldy1jb250ZW50JztcclxuXHJcbiAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG5cdHJhdGluZy5pbm5lckhUTUwgPSBgUmF0aW5nOiAke3Jldmlldy5yYXRpbmd9YDtcclxuXHRyYXRpbmcuY2xhc3NMaXN0LmFkZCgnYmFkZ2UnKTtcclxuICByZXZpZXdDb250ZW50LmFwcGVuZENoaWxkKHJhdGluZyk7XHJcblxyXG4gIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIGNvbW1lbnRzLmlubmVySFRNTCA9IHJldmlldy5jb21tZW50cztcclxuXHRyZXZpZXdDb250ZW50LmFwcGVuZENoaWxkKGNvbW1lbnRzKTtcclxuXHRcclxuXHRsaS5hcHBlbmRDaGlsZChyZXZpZXdDb250ZW50KTtcclxuXHJcbiAgcmV0dXJuIGxpO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkIHJlc3RhdXJhbnQgbmFtZSB0byB0aGUgYnJlYWRjcnVtYiBuYXZpZ2F0aW9uIG1lbnVcclxuICovXHJcbmNvbnN0IGZpbGxCcmVhZGNydW1iID0gKHJlc3RhdXJhbnQ9c2VsZi5yZXN0YXVyYW50KSA9PiB7XHJcbiAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhZGNydW1iJyk7XHJcbiAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG5cdGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcclxuXHRsaS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGV2ZWwnLCAyKTtcclxuICBsaS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY3VycmVudCcsICdwYWdlJyk7XHJcbiAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYSBwYXJhbWV0ZXIgYnkgbmFtZSBmcm9tIHBhZ2UgVVJMLlxyXG4gKi9cclxuY29uc3QgZ2V0UGFyYW1ldGVyQnlOYW1lID0gKG5hbWUsIHVybCkgPT4ge1xyXG4gIGlmICghdXJsKVxyXG4gICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xyXG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgWz8mXSR7bmFtZX0oPShbXiYjXSopfCZ8I3wkKWApLFxyXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcclxuICBpZiAoIXJlc3VsdHMpXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICBpZiAoIXJlc3VsdHNbMl0pXHJcbiAgICByZXR1cm4gJyc7XHJcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcclxufSJdfQ==
